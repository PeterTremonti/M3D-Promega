; Configuration file for RepRapFirmware on Duet 2 Maestro (discontinued)
; executed by the firmware on start-up
;
; generated by RepRapFirmware Configuration Tool v3.5.12 on Fri Jun 20 2025 22:59:08 GMT-0400 (Eastern Daylight Time)

; General
G90                 ; absolute coordinates
M83                 ; relative extruder moves
M550 P"Promega"     ; set hostname

; Network
M552 P0.0.0.0 S1    ; configure Ethernet adapter
M586 P0 S1          ; configure HTTP

; Smart Drivers
M569 P0 S1 D3 V0    ; driver 0 goes forwards (X axis)
M569 P1 S1 D3 V0    ; driver 1 goes forwards (Y axis)
M569 P2 S1 D3 V0    ; driver 2 goes forwards (Z axis)
M569 P3 S0 D3 V800  ; driver 3 goes backwards (extruder 0)
M569 P4 S1 D3 V800  ; driver 4 goes forwards (extruder 1)

; Motor Idle Current Reduction
M906 I60            ; set motor current idle factor
M84 S5              ; set motor current idle timeout

; Axes
M584 X0 Y1 Z2               ; set axis mapping
M350 X16 Y16 Z16 I1         ; configure microstepping with interpolation
M906 X800 Y800 Z800         ; set axis driver currents
M92 X79.48 Y80.44 Z283.92   ; configure steps per mm
M208 X0:380 Y0:380 Z0:380   ; set minimum and maximum axis limits
M566 X1200 Y1200 Z100       ; set maximum instantaneous speed changes (mm/min)
M203 X40000 Y40000 Z2500    ; set maximum speeds (mm/min)
M201 X5000 Y5000 Z1000      ; set accelerations (mm/s^2)

; Extruders
M584 E3:4           ; set extruder mapping
M350 E16:16 I1      ; configure microstepping with interpolation
M906 E420:420       ; set extruder driver currents
M92 E208.25:208.25  ; configure steps per mm
M566 E300:300       ; set maximum instantaneous speed changes (mm/min)
M203 E600:600       ; set maximum speeds (mm/min)
M201 E250:250       ; set accelerations (mm/s^2)

; Kinematics
M669 K1             ; configure CoreXY kinematics

; Probes
M558 K0 P5 C"zprobe.in" H5:2.5 F300:60 T7500    ; configure digital probe via slot #0
G31 P500 X30.4 Y30.7 Z1.10                      ; set Z probe trigger value, offset and trigger height

; Endstops
M574 X2 P"!xstop" S1        ; configure X axis endstop
M574 Y2 P"!ystop" S1        ; configure Y axis endstop
M574 Z2 P"!zstop" S1        ; configure Z axis endstop

; Mesh Bed Compensation
M557 X35:340 Y35:340 S40:40 ; define grid for mesh bed compensation

; Sensors
M308 S0 P"bedtemp" Y"thermistor" A"Heated Bed" T100000 B4138    ; configure sensor #0
M308 S2 P"e1temp" Y"pt1000" A"Nozzle"                           ; configure sensor #2

; Heaters
M950 H0 C"bedheat" T0               ; create heater #0
M143 H0 P0 T0 C0 S120 A0            ; configure heater monitor #0 for heater #0
M307 H0 R2.43 D5.5 E1.35 K0.56 B1   ; configure model of heater #0
M950 H2 C"e1heat" T2                ; create heater #2
M143 H2 P0 T2 C0 S280 A0            ; configure heater monitor #0 for heater #2
M307 H2 R2.43 D5.5 E1.35 K0.56 B0   ; configure model of heater #2

; Heated beds
M140 P0 H0          ; configure heated bed #0

; Fans
M950 F0 C"fan0"                             ; create fan #0
M106 P0 C"Nozzle Heatsink" S0 B0.1 H2 T45   ; configure fan #0
M950 F2 C"fan2"                             ; create fan #2
M106 P2 C"Part Cooling" S0 L0 X1 B0.1       ; configure fan #2

; Tools
M563 P0 S"Mixing Extruders" D0:1 H2 F1      ; create tool #0
M568 P0 R0 S0                               ; set initial tool #0 active and standby temperatures to 0C
M567 P0 E0.5:0.5                            ; set mixing ratios for tool #0
M563 P1 S"Extruder 1 (Left Only)" D0 H2 F1  ; create tool #1
M568 P1 R0 S0                               ; set initial tool #1 active and standby temperatures to 0C
M563 P2 S"Extruder2 (Right Only)" D1 H2 F1  ; create tool #2
M568 P2 R0 S0                               ; set initial tool #2 active and standby temperatures to 0C

; Miscellaneous
M501                ; load saved parameters from non-volatile memory

; Custom settings
M567 P0 E0.5:0.5                            ; Configure mixing nozzle to use half and half from both extruder motors
M572 D0:1 S0.07								; Extruder Pressure Advance
M564 H0 S1                                  ; Allow axes movement without homing but limits movement to specified bed size after homing

M669 K1 X1:1:0 Y1:-1:0 Z0:0:1               ; Correct CoreXY kinematic matrix
; For some reason even though it's set correctly in configtool.json it still fucks up and changes to the wrong matrix
